{
  "widget-schemas": {
    "markdown-note": {
      "id": "markdown-note",
      "name": "Markdown Note",
      "description": "Rich text widget with LaTeX math and variable substitution support",
      "category": "content",
      "icon": "üìù",
      "input_schema": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "Markdown content with LaTeX support",
            "default": "# New Note\n\nClick edit to add your **markdown** content with *LaTeX* support:\n\n$$\\int_{-\\infty}^{\\infty} e^{-x^2} dx = \\sqrt{\\pi}$$"
          },
          "variables": {
            "type": "object",
            "description": "Variables for substitution in markdown",
            "patternProperties": {
              "^[a-zA-Z_][a-zA-Z0-9_]*$": {
                "type": ["string", "number", "boolean"]
              }
            },
            "default": {}
          },
          "render_latex": {
            "type": "boolean",
            "description": "Whether to render LaTeX math expressions",
            "default": true
          }
        },
        "required": ["content"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "rendered_html": {
            "type": "string",
            "description": "Rendered HTML output"
          },
          "variables_used": {
            "type": "array",
            "items": {"type": "string"},
            "description": "List of variable names found in content"
          }
        }
      },
      "python_script": "widgets/markdown_widget.py"
    },
    
    "python-code": {
      "id": "python-code",
      "name": "Python Code",
      "description": "Executable Python code widget with output capture",
      "category": "computation",
      "icon": "üêç",
      "input_schema": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "Python code to execute",
            "default": "# Python code cell\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# Create sample data\nx = np.linspace(0, 2*np.pi, 100)\ny = np.sin(x)\n\n# Return result\nresult = {'x': x.tolist(), 'y': y.tolist()}\nprint('Generated sine wave data')"
          },
          "imports": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Additional imports to include",
            "default": ["numpy", "matplotlib.pyplot"]
          },
          "variables": {
            "type": "object",
            "description": "Input variables available to the code",
            "default": {}
          }
        },
        "required": ["code"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "result": {
            "type": "any",
            "description": "Final result value from code execution"
          },
          "stdout": {
            "type": "string",
            "description": "Printed output from code execution"
          },
          "stderr": {
            "type": "string",
            "description": "Error output if any"
          },
          "variables": {
            "type": "object",
            "description": "All variables defined in the execution context"
          },
          "execution_time": {
            "type": "number",
            "description": "Execution time in milliseconds"
          }
        }
      },
      "python_script": "widgets/python_widget.py"
    },
    
    "wp-two-panel": {
      "id": "wp-two-panel",
      "name": "‚Ñò Two-Panel Plot",
      "description": "Standard ‚Ñò(z) and ‚Ñò‚Ä≤(z) visualization with color mapping",
      "category": "visualization",
      "icon": "‚àû",
      "input_schema": {
        "type": "object",
        "properties": {
          "p": {
            "type": "number",
            "description": "Lattice parameter p",
            "minimum": 0.1,
            "maximum": 20,
            "default": 11.0
          },
          "q": {
            "type": "number", 
            "description": "Lattice parameter q",
            "minimum": 0.1,
            "maximum": 20,
            "default": 5.0
          },
          "N": {
            "type": "integer",
            "description": "Truncation level",
            "minimum": 0,
            "maximum": 6,
            "default": 3
          },
          "grid_size": {
            "type": "object",
            "properties": {
              "x": {"type": "integer", "minimum": 50, "maximum": 300, "default": 100},
              "y": {"type": "integer", "minimum": 50, "maximum": 300, "default": 100}
            }
          },
          "contours": {"type": "integer", "minimum": 0, "maximum": 30, "default": 10},
          "saturation": {"type": "number", "minimum": 0.1, "maximum": 1.0, "default": 0.3}
        },
        "required": ["p", "q", "N"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "plot_data": {
            "type": "object",
            "properties": {
              "image_base64": {"type": "string"},
              "width": {"type": "integer"},
              "height": {"type": "integer"}
            }
          },
          "field_data": {
            "type": "object",
            "description": "‚Ñò(z) and ‚Ñò‚Ä≤(z) field data"
          }
        }
      },
      "python_script": "widgets/wp_two_panel.py"
    },

    "wp-three-panel": {
      "id": "wp-three-panel", 
      "name": "‚Ñò Three-Panel Plot",
      "description": "‚Ñò(z), Re(‚Ñò‚Ä≤(z)), and Im(‚Ñò‚Ä≤(z)) in grayscale panels",
      "category": "visualization",
      "icon": "‚àû",
      "input_schema": {
        "type": "object",
        "properties": {
          "p": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 11.0},
          "q": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 5.0},
          "N": {"type": "integer", "minimum": 0, "maximum": 6, "default": 3},
          "grid_size": {
            "type": "object",
            "properties": {
              "x": {"type": "integer", "minimum": 50, "maximum": 300, "default": 100},
              "y": {"type": "integer", "minimum": 50, "maximum": 300, "default": 100}
            }
          },
          "value_floor": {"type": "number", "minimum": 0, "maximum": 1, "default": 0.3}
        },
        "required": ["p", "q", "N"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "plot_data": {
            "type": "object",
            "properties": {
              "image_base64": {"type": "string"},
              "width": {"type": "integer"}, 
              "height": {"type": "integer"}
            }
          },
          "component_data": {
            "type": "object",
            "description": "Separate ‚Ñò, Re(‚Ñò‚Ä≤), Im(‚Ñò‚Ä≤) field data"
          }
        }
      },
      "python_script": "widgets/wp_three_panel.py"
    },

    "wp-five-panel": {
      "id": "wp-five-panel",
      "name": "‚Ñò Five-Panel Analysis", 
      "description": "Complete ‚Ñò function analysis with derivatives and magnitude",
      "category": "visualization",
      "icon": "‚àû",
      "input_schema": {
        "type": "object",
        "properties": {
          "p": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 11.0},
          "q": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 5.0},
          "N": {"type": "integer", "minimum": 0, "maximum": 6, "default": 3},
          "grid_size": {
            "type": "object", 
            "properties": {
              "x": {"type": "integer", "minimum": 50, "maximum": 300, "default": 150},
              "y": {"type": "integer", "minimum": 50, "maximum": 300, "default": 150}
            }
          },
          "show_contours": {"type": "boolean", "default": true},
          "show_poles": {"type": "boolean", "default": true}
        },
        "required": ["p", "q", "N"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "plot_data": {
            "type": "object",
            "properties": {
              "image_base64": {"type": "string"},
              "width": {"type": "integer"},
              "height": {"type": "integer"}
            }
          },
          "analysis_data": {
            "type": "object",
            "description": "Complete field analysis data"
          }
        }
      },
      "python_script": "widgets/wp_five_panel.py"
    },

    "wp-trajectories": {
      "id": "wp-trajectories",
      "name": "‚Ñò Trajectory Analysis",
      "description": "Particle trajectory integration in the ‚Ñò field",
      "category": "visualization", 
      "icon": "üéØ",
      "input_schema": {
        "type": "object",
        "properties": {
          "p": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 11.0},
          "q": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 5.0},
          "N": {"type": "integer", "minimum": 0, "maximum": 6, "default": 3},
          "particles": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "z0": {"type": "string", "description": "Initial position (complex)", "default": "5+0j"},
                "v0": {"type": "string", "description": "Initial velocity (complex)", "default": "0+1j"}
              }
            },
            "minItems": 1,
            "default": [{"z0": "5+0j", "v0": "0+1j"}]
          },
          "integration": {
            "type": "object",
            "properties": {
              "dt": {"type": "number", "minimum": 0.001, "maximum": 0.1, "default": 0.01},
              "T": {"type": "number", "minimum": 0.1, "maximum": 10, "default": 2.0},
              "blow_thresh": {"type": "number", "minimum": 1, "maximum": 100, "default": 10.0}
            }
          }
        },
        "required": ["p", "q", "N", "particles"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "plot_data": {
            "type": "object",
            "properties": {
              "image_base64": {"type": "string"},
              "width": {"type": "integer"},
              "height": {"type": "integer"}
            }
          },
          "trajectories": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "path": {"type": "array"},
                "blowup_point": {"type": ["string", "null"]},
                "integration_time": {"type": "number"}
              }
            }
          }
        }
      },
      "python_script": "widgets/wp_trajectories.py"
    },

    "wp-lattice": {
      "id": "wp-lattice",
      "name": "‚Ñò Lattice Analysis",
      "description": "Systematic lattice point trajectory analysis",
      "category": "visualization",
      "icon": "üîó",
      "input_schema": {
        "type": "object",
        "properties": {
          "p": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 11.0},
          "q": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 5.0},
          "N": {"type": "integer", "minimum": 0, "maximum": 6, "default": 3},
          "lattice_range": {"type": "integer", "minimum": 1, "maximum": 10, "default": 3},
          "integration": {
            "type": "object",
            "properties": {
              "dt": {"type": "number", "minimum": 0.001, "maximum": 0.1, "default": 0.01},
              "T": {"type": "number", "minimum": 0.1, "maximum": 5, "default": 1.0}
            }
          }
        },
        "required": ["p", "q", "N"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "plot_data": {
            "type": "object",
            "properties": {
              "image_base64": {"type": "string"},
              "width": {"type": "integer"},
              "height": {"type": "integer"}
            }
          },
          "lattice_data": {
            "type": "object",
            "description": "Lattice trajectory analysis results"
          }
        }
      },
      "python_script": "widgets/wp_lattice.py"
    },

    "wp-poles": {
      "id": "wp-poles",
      "name": "‚Ñò Pole Analysis",
      "description": "Pole structure and singularity visualization",
      "category": "visualization",
      "icon": "‚ö™",
      "input_schema": {
        "type": "object",
        "properties": {
          "p": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 11.0},
          "q": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 5.0},
          "N": {"type": "integer", "minimum": 0, "maximum": 6, "default": 3},
          "pole_radius": {"type": "number", "minimum": 0.01, "maximum": 1.0, "default": 0.1},
          "show_residues": {"type": "boolean", "default": true},
          "highlight_nearest": {"type": "boolean", "default": true}
        },
        "required": ["p", "q", "N"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "plot_data": {
            "type": "object",
            "properties": {
              "image_base64": {"type": "string"},
              "width": {"type": "integer"},
              "height": {"type": "integer"}
            }
          },
          "pole_data": {
            "type": "object",
            "description": "Pole locations, residues, and singularity analysis"
          }
        }
      },
      "python_script": "widgets/wp_poles.py"
    },

    "wp-contours": {
      "id": "wp-contours",
      "name": "‚Ñò Contour Plot",
      "description": "Topographic field contour mapping",
      "category": "visualization",
      "icon": "üìà",
      "input_schema": {
        "type": "object",
        "properties": {
          "p": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 11.0},
          "q": {"type": "number", "minimum": 0.1, "maximum": 20, "default": 5.0},
          "N": {"type": "integer", "minimum": 0, "maximum": 6, "default": 3},
          "contour_levels": {"type": "integer", "minimum": 5, "maximum": 50, "default": 20},
          "field_type": {
            "type": "string",
            "enum": ["magnitude", "real", "imaginary", "phase"],
            "default": "magnitude"
          },
          "colormap": {
            "type": "string", 
            "enum": ["viridis", "plasma", "inferno", "magma", "coolwarm"],
            "default": "viridis"
          }
        },
        "required": ["p", "q", "N"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "plot_data": {
            "type": "object",
            "properties": {
              "image_base64": {"type": "string"},
              "width": {"type": "integer"},
              "height": {"type": "integer"}
            }
          },
          "contour_data": {
            "type": "object",
            "description": "Contour levels and field analysis"
          }
        }
      },
      "python_script": "widgets/wp_contours.py"
    },

    "data-plot": {
      "id": "data-plot",
      "name": "Data Plot",
      "description": "2D plotting widget for data visualization", 
      "category": "visualization",
      "icon": "üìä",
      "input_schema": {
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "x": {"type": "array", "items": {"type": "number"}},
              "y": {"type": "array", "items": {"type": "number"}}
            },
            "required": ["x", "y"]
          },
          "plot_type": {
            "type": "string",
            "enum": ["line", "scatter", "bar", "histogram"],
            "default": "line"
          },
          "title": {"type": "string", "default": "Data Plot"},
          "xlabel": {"type": "string", "default": "X"},
          "ylabel": {"type": "string", "default": "Y"},
          "style": {
            "type": "object",
            "properties": {
              "color": {"type": "string", "default": "blue"},
              "linewidth": {"type": "number", "default": 1.0},
              "marker": {"type": "string", "default": "o"}
            }
          }
        },
        "required": ["data"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "plot_image": {
            "type": "object",
            "properties": {
              "image_base64": {"type": "string"},
              "width": {"type": "integer"},
              "height": {"type": "integer"}
            }
          },
          "statistics": {
            "type": "object",
            "properties": {
              "mean_x": {"type": "number"},
              "mean_y": {"type": "number"},
              "std_x": {"type": "number"},
              "std_y": {"type": "number"}
            }
          }
        }
      },
      "python_script": "widgets/plot_widget.py"
    },

    "data-generator": {
      "id": "data-generator",
      "name": "Data Generator",
      "description": "Generate synthetic datasets for analysis",
      "category": "data",
      "icon": "üìã",
      "input_schema": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["linear", "sine", "cosine", "polynomial", "random", "normal"],
            "default": "sine"
          },
          "n_points": {
            "type": "integer",
            "minimum": 10,
            "maximum": 10000,
            "default": 100
          },
          "parameters": {
            "type": "object",
            "properties": {
              "amplitude": {"type": "number", "default": 1.0},
              "frequency": {"type": "number", "default": 1.0},
              "phase": {"type": "number", "default": 0.0},
              "noise": {"type": "number", "minimum": 0, "default": 0.1}
            }
          },
          "x_range": {
            "type": "object",
            "properties": {
              "min": {"type": "number", "default": 0},
              "max": {"type": "number", "default": 10}
            }
          }
        },
        "required": ["type", "n_points"]
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "x": {"type": "array", "items": {"type": "number"}},
              "y": {"type": "array", "items": {"type": "number"}}
            }
          },
          "metadata": {
            "type": "object",
            "properties": {
              "generator_type": {"type": "string"},
              "parameters_used": {"type": "object"},
              "generated_at": {"type": "string"}
            }
          }
        }
      },
      "python_script": "widgets/data_generator_widget.py"
    }
  }
}