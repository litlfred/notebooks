{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "{{SCHEMA_BASE_URL}}/pq-torus.json",
  "title": "PQ-Torus Widget Schemas",
  "description": "Input and output schemas for PQ-Torus widget defining torus T = C / L where L = Zp + Zqi",
  "definitions": {
    "prime_pair_input": {
      "$id": "#/definitions/prime_pair_input",
      "type": "object",
      "title": "PQ-Torus Prime Pair Input Schema",
      "description": "Input parameters for PQ-Torus widget - pair of prime integers",
      "properties": {
        "p": {
          "type": "integer",
          "description": "First prime integer p for lattice L = Zp + Zqi",
          "minimum": 2,
          "maximum": 100,
          "default": 11,
          "examples": [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]
        },
        "q": {
          "type": "integer",
          "description": "Second prime integer q for lattice L = Zp + Zqi",  
          "minimum": 2,
          "maximum": 100,
          "default": 5,
          "examples": [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47]
        }
      },
      "required": ["p", "q"],
      "additionalProperties": false
    },
    "prime_pair_output": {
      "$id": "#/definitions/prime_pair_output",
      "type": "object",
      "title": "PQ-Torus Prime Pair Output Schema",
      "description": "Output data from PQ-Torus widget - same as input with validation results",
      "allOf": [
        {"$ref": "{{SCHEMA_BASE_URL}}/common.json#/definitions/execution_result"}
      ],
      "properties": {
        "p": {
          "type": "integer",
          "description": "Validated first prime integer p"
        },
        "q": {
          "type": "integer",
          "description": "Validated second prime integer q"
        },
        "torus_description": {
          "type": "string",
          "description": "Mathematical description of the torus T = C / L"
        },
        "lattice_description": {
          "type": "string", 
          "description": "Description of the lattice L = Zp + Zqi"
        },
        "prime_validation": {
          "type": "object",
          "properties": {
            "p_is_prime": {"type": "boolean"},
            "q_is_prime": {"type": "boolean"},
            "validation_message": {"type": "string"}
          }
        },
        "markdown_content": {
          "type": "string",
          "description": "Markdown formatted display of the torus and prime values"
        },
        "metadata": {
          "allOf": [
            {"$ref": "{{SCHEMA_BASE_URL}}/common.json#/definitions/metadata"}
          ],
          "properties": {
            "lattice_type": {"type": "string", "enum": ["rectangular_prime_lattice"]},
            "torus_equation": {"type": "string"},
            "fundamental_domain": {"type": "object"}
          }
        }
      }
    }
  }
}